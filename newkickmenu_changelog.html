<!DOCTYPE html []>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Список изменений New Kick Menu</title>
  <style type="text/css">
    td,
    h1,
    h2,
    h3,
    h4,
    h5,
    p,
    ul,
    ol,
    li {
      page-break-inside: avoid;
    }
  </style>
</head>

<body>
  <h3 id="section">Версия 1.8.0 (18 апр 2024г):</h3>
  <h4 id="section-1">Изменено:</h4>
  <ul>
    <li>повышено удобство чтения newkickmenu.cfg (длина строк)</li>
    <li>в 'lang/newkickmenu.txt' добавлена памятка о возможности отключать<br />
      сообщения</li>
    <li>если предупреждение выдается одному игроку, то в сообщении чата отображается<br />
      текущее и максимально допустимое количество предупреждений для данной причины</li>
    <li>в forward функцию nkm_player_warned добавлен аргументы reason_num и manual:</li>
  </ul>
  <pre><code>      /**
        * Функция вызывается при выдаче предупреждения игроку
        *
        * @ param player      индекс игрока
        * @ param reason_num  порядковый номер причины
        * @ param manual      ручное или автоматическое увеличение предупреждений
        *                     ручное - через меню
        *                     автоматическое - при загрузке сохраненных
        *
        * @ noreturn
      */
      
      forward nkm_player_warned(player, reason_num, manual);</code></pre>
  <ul>
    <li>в forward функцию nkm_player_unwarned добавлен аргументы reason_num и manual:</li>
  </ul>
  <pre><code>      /**
        * Функция вызывается при снятии предупреждения игроку
        *
        * @ param player      индекс игрока
        * @ param reason_num  порядковый номер причины
        * @ param manual      ручное или автоматическое уменьшение предупреждений
        *                     ручное - через меню
        *                     автоматическое - при истечение срока
        *
        * @ noreturn
      */

      forward nkm_player_unwarned(player, reason_num, manual);</code></pre>
  <h4 id="section-2">Исправлено:</h4>
  <ul>
    <li>сообщение о снятии предупреждения отображалось всем</li>
  </ul>
  <h4 id="section-3">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/newkickmenu.amxx</li>
    <li>addons/amxmodx/configs/newkickmenu.cfg</li>
    <li>addons/amxmodx/data/lang/newkickmenu.txt</li>
  </ul>
  <h3 id="section-4">Версия 1.7.0 (08 мар 2023г):</h3>
  <h4 id="section-5">Добавлено:</h4>
  <ul>
    <li>в меню подтверждения добавлена возможность снять предупреждение по выбранной<br />
      причине</li>
    <li>в меню выбора причины добавлено отображения количества текущих предупреждений<br />
      игрока</li>
    <li>добавлен квар nkm_unwarning_hud_msg, отвечающий за RGB цвет и XY координаты<br />
      HUD сообщения, которое показывается при снятии предупреждения</li>
    <li>команда 'amx_kickmenu', добавлена в квар nkm_kick_menu_cmd. Ранее эта команда<br />
      была неотключаемой</li>
    <li>для функции 'new_kick_menu_display' добавлено альтернативное имя<br />
      'nkm_kick_menu_display'</li>
    <li>добавлен ключ словаря 'NKM_WARNING_REASON_CHAT_MSG', который отвечает за<br />
      отображение причины предупреждения на отдельной строке чата.<br />
      Причина: на версии AMX Mod X 1.8.2 была кастомная функция client_print_color,<br />
      которая умела переносить текст. На AMX Mod X 1.8.3 и выше перенос не работает</li>
    <li>добавлена forward функция:</li>
  </ul>
  <pre><code>      /**
        * Функция вызывается при выдаче предупреждения игроку
        *
        * @ param player индекс игрока
        *
        * @ noreturn
      */
      
      native nkm_player_warned(const player);</code></pre>
  <ul>
    <li>добавлена forward функция:</li>
  </ul>
  <pre><code>      /**
        * Функция вызывается при снятии предупреждения игроку
        *
        * @ param player индекс игрока
        *
        * @ noreturn
      */

      native nkm_player_unwarned(const player);</code></pre>
  <ul>
    <li>добавлена native функция:</li>
  </ul>
  <pre><code>      /**
        * Возвращает количество предупреждений игрока по
        * указанной причине или общее число предупреждений
        *
        * @ param player     индекс игрока
        * @ param reason_num порядковый номер причины.
        *                    Спец значение: -1 - функция вернет общее число  
        *                    предупреждений
        *
        * @ return           количество предупреждений 
      */

      native nkm_get_warnings_num(const player, reason_num);</code></pre>
  <h4 id="section-6">Исправлено:</h4>
  <ul>
    <li>пропущено описание аргумента 'warning_commands' в команде nkm_add_reason</li>
    <li>аргумент 'warning_commands' шел после 'punish_commands', а должно быть наоборот</li>
    <li>неправильный размер массива, отвечающего за выбранных игроков</li>
  </ul>
  <h4 id="section-7">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/newkickmenu.amxx</li>
    <li>addons/amxmodx/configs/newkickmenu.cfg</li>
    <li>addons/amxmodx/data/lang/newkickmenu.txt</li>
  </ul>
  <h3 id="section-8">Версия 1.6.0 (10 янв 2023г):</h3>
  <h4 id="section-9">Добавлено:</h4>
  <ul>
    <li>добавлен квар nkm_data_storage_time, отвечающий за время хранения данных<br />
      (в днях) о предупреждениях игроков (по умолчанию месяц)</li>
    <li>в команду 'nkm_add_reason' между 'sound_path' и 'punish_commands' добавлен аргумент:<br />
      warning_commands - необязательный аргумент, отвечающий за команды выполняемые<br />
      при выдаче предупреждения</li>
  </ul>
  <h4 id="section-10">Исправлено</h4>
  <ul>
    <li>не удалялись истекшие предупреждения</li>
  </ul>
  <h4 id="section-11">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/newkickmenu.amxx</li>
    <li>addons/amxmodx/configs/newkickmenu.cfg</li>
  </ul>
  <h3 id="section-12">Версия 1.5.0 (13 янв 2022г):</h3>
  <h4 id="section-13">Добавлено:</h4>
  <ul>
    <li>в кик меню добавлена возможность выбрать сортировку игроков. На данный момент<br />
      доступны 2: по алфавиту, по фрагам и смертям</li>
    <li>в кик меню добавлено меню выбора фильтров игроков. На данный момент доступны<br />
      фильтры: живые, мертвые, боты, реальные игроки, STEAM игроки, GSCLIENT игроки,<br />
      команда TT, команда CT, команда ST</li>
    <li>в команду 'nkm_add_reason' добавлены аргументы: 'short_id', 'type', 'access_flags',<br />
      'immunity_flags', 'max_warnings', 'sound'. Это позволяет: сделать пункт с<br />
      возможностью указывать свою причину позиционно-независимым, создавать несколько<br />
      пунктов с возможностью указывать свою причину, создавать многоуровневые причины<br />
      где админы разных уровней доступа видят разные причины (доступные только им) с<br />
      учетом применимости к выбранному игроку, озвучивать каждый пункт меню музыкой,<br />
      звуками или записать разъяснение причины голосом (например синтезаторами речи)
      <ul>
        <li>short_id - обязательный аргумент, отвечающий за уникальный (не должен<br />
          повторяться) короткий идентификатор причины используемый для хранения<br />
          количества предупреждений игроков. Размер идентификатора 3 символа: цифры и<br />
          латинские буквы</li>
        <li>type - обязательный аргумент, отвечающий за тип причины. Значения: 0 - данный<br />
          тип причины позволяет вводить любую причину вручную, 1 - тип причины с заранее<br />
          заданными и не изменяемыми настройками</li>
        <li>access_flags - обязательный аргумент, отвечающий за флаги доступа игроков,<br />
          которые смогут применять причину</li>
        <li>immunity_flags - обязательный аргумент, отвечающий за флаги доступа игроков,<br />
          которые будут иметь иммунитет от этой причины</li>
        <li>max_warnings - обязательный аргумент, отвечающий за лимит предупреждений после<br />
          превышения которого игрок будет автоматически удален с сервера</li>
        <li>sound_path - необязательный аргумент, отвечающий за путь к файлу звука<br />
          (mp3 или wav), который будет проигрываться игроку при выдаче предупреждения</li>
      </ul>
    </li>
  </ul>
  <h4 id="section-14">Изменено:</h4>
  <ul>
    <li>благодаря введению идентификатора причины в команде 'nkm_add_reason'<br />
      предупреждения теперь начисляются по каждой причине отдельно<br />
      (раньше было общее число предупреждений)</li>
  </ul>
  <h4 id="section-15">Удалено:</h4>
  <ul>
    <li>удален квар 'nkm_warning_sound', так как его заменил аргумент 'sound_path'<br />
      в команде 'nkm_add_reason'</li>
    <li>удален квар 'nkm_max_warnings', так как его заменил аргумент 'max_warnings'<br />
      в команде 'nkm_add_reason'</li>
    <li>удален квар 'nkm_immunity_flags', так как его заменил аргумент 'immunity_flags'<br />
      в команде 'nkm_add_reason'</li>
    <li>удален квар 'nkm_high_access_flags', так как его заменил аргумент 'access_flags'<br />
      в команде 'nkm_add_reason'</li>
  </ul>
  <h4 id="section-16">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/newkickmenu.amxx</li>
    <li>addons/amxmodx/configs/newkickmenu.cfg</li>
    <li>addons/amxmodx/data/lang/newkickmenu.txt</li>
  </ul>
  <h3 id="section-17">Версия 1.4.10 (06 апр 2021г):</h3>
  <h4 id="section-18">Изменено:</h4>
  <ul>
    <li>переименован квар 'nkm_version' в 'new_kick_menu_version'</li>
    <li>изменен код под внешнее ядро плагинов (plugins_core.amxx)</li>
    <li>изменен код для лучшей совместимости с All Inclusive</li>
  </ul>
  <h4 id="section-19">Исправлено:</h4>
  <ul>
    <li>при ручной перезагрузке конфига список загруженных причин теперь обнуляется, а<br />
      не добавляется к уже загруженным ранее</li>
  </ul>
  <h4 id="section-20">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/newkickmenu.amxx</li>
    <li>addons/amxmodx/configs/newkickmenu.cfg</li>
    <li>addons/amxmodx/data/lang/newkickmenu.txt</li>
  </ul>
  <h3 id="section-21">Версия 1.4.7 (09 июл 2019г):</h3>
  <h4 id="section-22">Добавлено:</h4>
  <ul>
    <li>
      <p>возможность сохранения предупреждений на указанное в команде nkm_add_reason<br />
        время (для каждой причины свое время).<br />
        Пригодится для реализации необнуляемых при смене карты предупреждений.</p>
      <p>Внимание: нужно обновить newkickmenu.cfg (удалить при включенном сервере)</p>
    </li>
    <li>
      <p>добавлены контекстно-зависимые аргументы для команды nkm_add_reason с<br />
        альтернативным синтаксисом (в квадратных скобках):<br />
        [userid], [authid], [name], [ip], [reason]</p>
    </li>
  </ul>
  <h4 id="section-23">Изменено:</h4>
  <ul>
    <li>
      <p>команда для наказания, теперь вызывается только когда было набрано максимальное<br />
        число предупреждений. Что позволяет выбирать тип наказания, отличный от кика.<br />
        Например: бан, гаг и т.д</p>
    </li>
    <li>
      <p>квары отвечающие за настройку HUD сообщений (оканчивающиеся на _pos и _color),<br />
        объединены в один квар где значение цвета и координат разделяется символом '|'</p>
    </li>
  </ul>
  <h4 id="section-24">Исправлено:</h4>
  <ul>
    <li>исправлен недочет меню из-за изменения кода в AMX Mod X версии 1.8.3+</li>
  </ul>
  <h3 id="section-25">Версия 1.4.2 (31 мар 2018г):</h3>
  <h4 id="section-26">Добавлено:</h4>
  <ul>
    <li>реклама в консоли игрока при подключении</li>
  </ul>
  <h4 id="section-27">Исправлено:</h4>
  <ul>
    <li>исправлен недочет: из-за того что код не соответствовал последним изменениям<br />
      в ядре плагинов, отображаемое время конца привилегий всегда было 0 (бесконечным)</li>
  </ul>
  <h3 id="section-28">Версия 1.4.0 (18 ноя 2017г):</h3>
  <h4 id="section-29">Добавлено:</h4>
  <ul>
    <li>добавлен квар nkm_kick_menu_cmd, отвечающий за список команд<br />
      (разделенных ';') с помощью которых будет вызываться кик меню</li>
  </ul>
  <h4 id="section-30">Исправлено:</h4>
  <ul>
    <li>после выбора причины снова открывалось меню выбора игрока (недочет<br />
      предыдущего обновления)</li>
    <li>при отмене выбора последнего/единственного игрока меню уничтожалось, но<br />
      визуально отображалось на экране</li>
  </ul>
  <h4 id="section-31">Изменено:</h4>
  <ul>
    <li>если в кваре nkm_kick_menu_cmd задана команда чата, то можно писать часть<br />
      ника после неё для быстрого выбора игрока, при этом регистр букв игнорируется</li>
    <li>плагин теперь использует ядро плагинов версии 1.0.1</li>
    <li>удален код блокирующий запуск плагина на ReHLDS серверах, но не проверялась<br />
      работоспособность</li>
    <li>расширена функциональность квара nkm_warning_sound, теперь звук может быть<br />
      двух форматов: wav и mp3</li>
    <li>команда наказания при превышении предупреждений теперь поддерживает<br />
      экранирование одинарными кавычками, которые потом будут преобразованы в двойные</li>
  </ul>
  <h3 id="section-32">Версия 1.3.2 (05 дек 2016г):</h3>
  <h4 id="section-33">Добавлено:</h4>
  <ul>
    <li>возможность отключения любых сообщений с помощью комментирования в<br />
      newkickmenu.txt ('//' или ';')</li>
    <li>добавлено автоматическое создание multilang файла newkickmenu.txt</li>
  </ul>
  <h4 id="section-34">Изменено:</h4>
  <ul>
    <li>расширена функциональность кваров отвечающих за флаги доступа. Если<br />
      квары писать через запятую, то требуется любой из них, иначе требуются все</li>
  </ul>
  <h4 id="section-35">Удалено:</h4>
  <ul>
    <li>удален квар nkm_warning_hud_msg</li>
  </ul>
  <h3 id="section-36">Версия 1.2.8 (01 июня 2016г):</h3>
  <h4 id="section-37">Добавлено:</h4>
  <ul>
    <li>добавлена консольная команда nkm_add_reason, которая добавляет причину,<br />
      соответствующее ей правило и команду наказания</li>
    <li>добавлен квар nkm_warning_hud_msg_pos, который задает x и y координаты<br />
      предупредительного HUD сообщения</li>
    <li>добавлено автоматическое создание конфигурационного файла new_kick_menu.cfg<br />
      для кваров, если он не существует</li>
    <li>добавлена возможность компиляции плагина в режиме интеграции<br />
      (#define ADMIN_LOADER_INTEGRATION) с плагином Admin Loader версии 1.5 и выше<br />
      от neygomon с целью получения флагов доступа через предоставляемое API</li>
  </ul>
  <h4 id="section-38">Изменено:</h4>
  <ul>
    <li>квар nkm_warning_sound теперь содержит путь к файлу звука, который будет<br />
      проигрываться игроку при выдаче предупреждения</li>
  </ul>
  <h4 id="section-39">Удалено:</h4>
  <ul>
    <li>удален new_kick_menu.ini, так как загрузка причин осуществляется через<br />
      new_kick_menu.cfg</li>
    <li>удален квар nkm_warning_punishment_cmd, так как его функциональность заменила<br />
      консольная команда nkm_add_reason</li>
    <li>удален квар auth_delay_load_flags, так как вызывает слишком много вопросов</li>
  </ul>
  <h3 id="section-40">Версия 1.2.0 (15 марта 2016г):</h3>
  <h4 id="section-41">Добавлено:</h4>
  <ul>
    <li>добавлен квар nkm_warning_hud_msg, который определяет будет ли показываться<br />
      HUD сообщение при выдаче предупреждения</li>
    <li>добавлен квар nkm_warning_sound, который определяет будет ли проигрываться<br />
      звук при выдаче предупреждения</li>
    <li>добавлен квар nkm_warning_punishment_cmd, который позволяет назначить свое<br />
      наказание за превышение максимального числа предупреждений</li>
    <li>добавлена функция native new_kick_menu_display(id), которая позволяет встраивать<br />
      в свои скрипты вызов нового Kick меню</li>
    <li>добавлена возможность выбора нескольких игроков для применения наказания</li>
    <li>добавлена возможность расставлять переносы строк для сообщений чата в<br />
      конфигурационных файлах (*.ini, *.cfg, *.txt) и исходном коде</li>
  </ul>
  <h3 id="section-42">Версия 1.1.5 (1 февраля 2016г):</h3>
  <h4 id="section-43">Добавлено:</h4>
  <ul>
    <li>добавлен квар nkm_warning_hud_msg_color, который задает цвет предупредительного<br />
      HUD сообщения</li>
    <li>добавлен квар nkm_log_type, который настраивает куда будут писаться логи.<br />
      0 - в стандартный лог AMX Mod X, 1 - в папку newkickmenu</li>
    <li>добавлен квар nkm_high_access_flags, который задает флаги доступа необходимые<br />
      для возможности кикать и выдавать предупреждения игрокам с иммунитетом</li>
    <li>добавлен конфигурационный файл newkickmenu.cfg, в котором можно задать<br />
      значения кваров и прочитать описания к ним</li>
  </ul>
  <h4 id="section-44">Изменено:</h4>
  <ul>
    <li>квар nkm_menu_access_flags, переименован в nkm_access_flags (смысл не<br />
      изменился, так как ничего кроме меню в плагине нет)</li>
  </ul>
  <h3 id="section-45">Версия 1.1.0 (30 декабря 2015г):</h3>
  <h4 id="section-46">Добавлено:</h4>
  <ul>
    <li>добавлена поддержка мультиязычности ("addons/amxmodx/data/lang/new_kick_menu.txt")</li>
    <li>добавлена возможность выдавать предупреждения</li>
  </ul>
  <h3 id="section-47">Версия 1.0.1 (23 ноября 2015г):</h3>
  <h4 id="section-48">Добавлено:</h4>
  <ul>
    <li>добавлена возможность игрокам с правами ADMIN_RCON (флаг "L"), кикать игроков<br />
      с иммунитетом</li>
  </ul>
  <h3 id="section-49">Версия 1.0.0 (8 сентября 2015г):</h3>
  <h4 id="section-50">Добавлено:</h4>
  <ul>
    <li>добавлен квар nkm_menu_access_flags "c", который задает флаги доступа к меню кика</li>
    <li>добавлено логирование кика, для возможности решения спорных ситуаций и<br />
      контроля за админами</li>
    <li>к правилу при кике добавляется имя админа, чтобы игрок точно сказал кто из<br />
      админов его наказал</li>
  </ul>
  <h4 id="section-51">Исправлено:</h4>
  <ul>
    <li>переделан конфиг newkickmenu.ini и код его загрузки, для поддержки большого<br />
      количества причин и правил</li>
    <li>исправлены недочеты форматирования при листании меню</li>
    <li>переименован квар nkm_delay_load_flags в auth_delay_load_flags</li>
  </ul>
  <h4 id="section-52">Удалено:</h4>
  <ul>
    <li>удален квар nkm_immunity, его функциональность добавлена в nkm_immunity_flags</li>
  </ul>
  <h3 id="section-53">Версия 0.9.4 (22 апреля 2015г):</h3>
  <h4 id="section-54">Добавлено:</h4>
  <ul>
    <li>возможность задать задержку загрузки флагов доступа (квар nkm_delay_load_flags)</li>
  </ul>
  <h4 id="section-55">Изменено:</h4>
  <ul>
    <li>реорганизация кода</li>
  </ul>
  <h3 id="section-56">Версия 0.9.3 (16 ноября 2014г):</h3>
  <h4 id="section-57">Добавлено:</h4>
  <ul>
    <li>добавлена возможность писать свою причину админам, у которых стоит защита на<br />
      CS (протектор)</li>
  </ul>
  <h4 id="section-58">Изменено:</h4>
  <ul>
    <li>полный переход на версию AMX ModX 1.8.3, на версиях 1.8.2 и ниже работа не<br />
      гарантируется</li>
    <li>плагин завершает работу если файл newkickmenu.ini был загружен некорректно.<br />
      Если загрузка прошла успешно, будет соответствующая запись об этом в логах<br />
      AMX Mod X</li>
  </ul>
  <h3 id="section-59">Версия 0.9.2 (13 мая 2014г):</h3>
  <h4 id="section-60">Добавлено:</h4>
  <ul>
    <li>добавлена возможность быстро кикать игрока, за которым в данный момент</li>
    <li>добавлена поддержка colorchat</li>
    <li>причины и правила считываются из newkickmenu.ini</li>
  </ul>
  <h4 id="section-61">Изменено:</h4>
  <ul>
    <li>плагин теперь работает без словаря</li>
    <li>если наблюдает админ, то он будет первым в списке. Также удобно если игрок<br />
      быстро меняет ники, можно быть уверенным что это именно он</li>
    <li>HLTV получил иммунитет</li>
  </ul>
  <h3 id="section-62">Версия 0.9.1:</h3>
  <h4 id="section-63">Изменено:</h4>
  <ul>
    <li>если у игрока есть бомба, он ее выкидывает и уже потом кикается</li>
  </ul>
  <h3 id="section-64">Версия 0.9.0:</h3>
  <ul>
    <li>первый релиз</li>
  </ul>
</body>

</html>