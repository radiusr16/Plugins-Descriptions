<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Описание плагина Night Mode</title>
</head>
<body>
<div style="width: 700px;">
Night Mode 1.7.0
<p>Автор: Radius</p>
<p>Описание:</p>
<p style="padding-left: 30px;">Плагин позволяет организовать на сервере работу ночного режима со сменой карт по расписанию и поддержкой CSDM мода.</p>
<p>Особенности:</p>
<ul>
<li>new: возможность кастомизации информеров с помощью контекстно-зависимых аргументов. Настраивается в 'lang/night_mode.txt'</li>
<li>new: возможность отключения отображения информера, с сохранением выбора и восстановлением при следующем подключении игрока</li>
<li>возможность указывать не только часы и минуты, но и даты</li>
<li>поддержка CSDM мода<br />
Внимание: Для работы в режиме поддержки CSDM мода, необходимо наличие установленного CSDM мода (сам плагин не обеспечивает эту функциональность).</li>
<li>блокировка всех возможностей смены карты на момент проведения ночного режима</li>
<li>возможность задать за сколько секунд до начала работы ночного режима выводить оповещение (квар nm_start_announce_before_time)</li>
<li>возможность настройки работы информера (см квары)</li>
<li>в конфигурационном файле night_mode.ini указываются карты, время начала режима и конца, путь к файлам со списком команд (в том числе возможность ставить на паузу плагины), которые будут исполняться перед началом ночного режима и после завершения</li>
<li>имеется API плагина (см 'addons/amxmodx/scripting/include/night_mode.inc')</li>
<li>все квары и команды для удобства настраиваются в автоматически создаваемом конфигурационном файле 'addons/amxmodx/configs/night_mode.cfg'</li>
<li>автоматически создаваемый словарь мультиязычности 'addons/amxmodx/data/lang/night_mode.txt'</li>
</ul>
<p>Требования:</p>
<ul><li><a href="plugins_core_description.html">Plugins Core (версии 1.8.0 и выше)</a></li></ul>
<p>Настройки (из автоматически создаваемого конфигурационного файла 'night_mode.cfg'):</p>
<div style="padding-left: 30px;white-space:pre;font-family:monospace">
// nm_update_config - обновить (1) или нет (0) данный файл при смене карты
// Внимание: Текущие значения кваров (кроме команд), запишутся в обновленный файл
// Квар со значением 1 прописывается в консоли сервера
// После обновления квар сам вернется в значение 0

// nm_update_dictionary - обновить (1) или нет (0) lang файл при смене карты
// Внимание: Квар со значением 1 прописывается в консоли сервера
// После обновления квар сам вернется в значение 0

// Уровень логов
//  0 - выключено (OFF)
//  1 - предупреждения (WARN)
//  2 - информация (INFO)
//  3 - отладочная информация (DEBUG)
//  4 - подробная отладочная информация (TRACE)
// По умолчанию: "2"
nm_log_level "2"

// Тип завершения одного интервала ночного режима
// 0 - сразу как наступило время
// 1 - дождаться начала следующего раунда
// По умолчанию: "1"
nm_stop_interval_type "1"

// На сколько секунд 'mp_timelimit' будет больше времени окончания интервала
// Пригодится в случае если голосование за смену карты, начинается раньше чем заканчивается интервал
// По умолчанию: "15"
nm_timelimit_offset "15"

// За сколько секунд до начала работы ночного режима выводить оповещение
// По умолчанию: "300"
nm_start_announce_before_time "300"

// RGB цвет и XY координаты HUD сообщения информера
// По умолчанию: "220 160 0 | 0.02 0.38"
nm_informer_hud_msg "220 160 0 | 0.02 0.38"

// RGB цвет, XY координаты и продолжительность HUD сообщения старта и конца ночного режима
// По умолчанию: "220 160 0 | -1.0 0.36 | 5.0"
nm_start_end_hud_msg "220 160 0 | -1.0 0.36 | 5.0"

// Показывать (1) или нет (0) информер по умолчанию
// По умолчанию: "1"
nm_hud_informer_default_state "1"

// Список команд (разделенных ';'), с помощью которых включается/отключается отображение информера
// По умолчанию: "say /nm"
nm_hud_informer_toggle_cmd "say /nm"

// Время (в секундах), через которое будет показываться информер
// По умолчанию: "60"
nm_hud_informer_delay "60"

// Сколько времени (в секундах) будет показываться информер
// По умолчанию: "10.0"
nm_hud_informer_show_time "10.0"

// nm_block_cmd - позволяет заблокировать команды на время ночного режима
// Формат команды:
//   nm_block_cmd "cmd_name" "cmd_args"
// cmd_name - обязательный аргумент, отвечающий за имя команды
// cmd_args - необязательный аргумет, отвечающий за аргументы команды
nm_block_cmd "mapm_startvote"
nm_block_cmd "amx_votemap"
nm_block_cmd "amx_votemapmenu"
nm_block_cmd "amx_changelevel"
nm_block_cmd "amx_mapmenu"
nm_block_cmd "amx_map"
nm_block_cmd "amx_rtv"
nm_block_cmd "say" "rtv"
nm_block_cmd "say" "/rtv"
nm_block_cmd "say" "/votemap"
nm_block_cmd "say" "rockthevote"
nm_block_cmd "say" "/rockthevote"
nm_block_cmd "say_team" "rtv"
nm_block_cmd "say_team" "/rtv"
nm_block_cmd "say_team" "/votemap"
nm_block_cmd "say_team" "rockthevote"
nm_block_cmd "say_team" "/rockthevote"

// nm_block_cmd_reset - позволяет очистить список команд, заблокированных
//   командой nm_block_cmd
// Формат команды:
//   nm_block_cmd_reset
</div>
<p>Настройки (из автоматически создаваемого конфигурационного файла 'night_mode.ini'):</p>
<div style="padding-left: 30px;white-space:pre;font-family:monospace">
; map_name - название карты, либо ключевое слово unknown
;   unknown - карта меняется с помощью вашего менеджера карт
; week_day - день недели указывается в виде диапазона от 1 до 7 (1-7)
;   либо перечислением (1,2,3 и т.д)
;   Внимание: Не должно быть никаких пробелов, либо заключить в двойные кавычки
; start_time, stop_time - время начала и конца интервала. По умолчанию время
;   указывается в формате %H:%M:%S (секунды %S можно пропустить)
;   Формат можно указывать самостоятельно после времени через символ '|' (вертикальная черта),
;   что позволяет указывать не только часы и минуты, но и конкретные даты
;   Например: "24/10/1996 - 00:00|%d/%m/%Y - %H:%M" - 24 октября 1996 полночь
;   Описание форматов времени: https://cplusplus.com/reference/ctime/strftime/
; start_cfg_file - конфигурационный файл, который будет выполнен в начале интервала
; stop_cfg_file  - конфигурационный файл, который будет выполнен в конце интервала
; map_name  week_day    start_time  stop_time start_cfg_file       stop_cfg_file
de_dust2    1-7         00:00       06:00     night_mode_start.cfg night_mode_stop.cfg
</div>
<p>Последняя версия 1.7.0 (30 июн 2024г):</p>
<ul style="padding-left: 55px;">
  <li><a href="night_mode_changelog.html">Список изменений</a></li>
</ul>
</div>
</body>
</html>