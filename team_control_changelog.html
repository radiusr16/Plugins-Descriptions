<!DOCTYPE html []>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Список изменений Team Control</title>
  <style type="text/css">
    td,
    h1,
    h2,
    h3,
    h4,
    h5,
    p,
    ul,
    ol,
    li {
      page-break-inside: avoid;
    }
  </style>
</head>

<body>
  <h3 id="section">Версия 1.11.0 (22 мая 2025г):</h3>
  <h4 id="section-1">Добавлено:</h4>
  <ul>
    <li>в админское меню смены команды (amx_teammenu), добавлено дополнительное меню<br />
      в котором можно скорректировать выбранного игрока, команду и выбрать как<br />
      перевести игрока сразу или в следующем раунде (после смерти при tc_no_rounds 1)</li>
    <li>добавлен квар tc_immunity_ignore_flags, отвечающий за флаги доступа необходимые<br />
      для игнорирования иммунитета от автобаланса. Пригодится если обычные игроки<br />
      получают флаги иммунитета (например ночью)</li>
    <li>добавлен квар tc_balance_by_flags_access_flags, отвечающий за флаги доступа<br />
      необходимые для баланса, уравнивающего команды по кол-ву игроков с флагом</li>
    <li>добавлен квар tc_balance_by_flags_ignore_flags, отвечающий за флаги доступа<br />
      необходимые для игнорирования балансом, уравнивающим команды по кол-ву игроков<br />
      с флагом. Пригодится если обычные игроки получают временные флаги<br />
      (например ночью)</li>
    <li>в api новые условия для перевода в другую команду TC_DELAYED_UNTIL_START_ROUND</li>
    <li>в каждый тип баланса добавлен дебаг лог, сообщающий что баланс невозможен<br />
      так как не было найдено ни одного игрока. Пригодится для выявления проблем<br />
      с настройками. Например слишком большое время иммунитета</li>
  </ul>
  <h4 id="section-2">Изменено:</h4>
  <ul>
    <li>квар tc_balance_by_flags теперь включает (1) и отключает (0) баланс по флагам</li>
    <li>баланс по количеству игроков теперь старается переводить игроков с наименьшим<br />
      скилом (так как они меньше всего влияют на баланс команд), если включен баланс<br />
      по скилу и имеются соответствующие плагины скила</li>
    <li>баланс по скилу теперь не переводит слабого игрока в сильную команду, если в<br />
      ней больше игроков чем в слабой команде (чтобы баланс по количеству игроков,<br />
      снова не перевел какого-нибудь игрока, создав дисбаланс)</li>
    <li>при включенном балансе по флагам на входе игрок автоматически распределяется<br />
      в нужную команду несмотря на его выбор команды</li>
    <li>плагин более не сбрасывает состояние defusekit при смене команды (возможная<br />
      причина проблем в плагинах смены моделей игрока с поддержкой суб-моделей)</li>
    <li>переработаны debug логи (теперь удобнее следить за логикой работы)</li>
    <li>заблокирована возможность выбирать команду через jointeam (yapb боты игнорируются)</li>
    <li>изменен порядок кваров в конфиге: tc_select_team_menu_type, tc_no_rounds,<br />
      tc_immunity_skip_times</li>
    <li>переименован квар tc_access_flags в tc_team_menu_access_flags</li>
    <li>переименован квар tc_high_access_flags в tc_team_menu_high_access_flags</li>
    <li>изменен вид пунктов меню в админском меню смены команды (amx_teammenu)</li>
    <li>удалён код поддерживающий HLDS версии. Теперь только ReHLDS</li>
  </ul>
  <h4 id="section-3">Исправлено:</h4>
  <ul>
    <li>баланс по скилу переставал работать до конца карты, если разница в скиле команд<br />
      была менее 30 единиц</li>
    <li>недочет в расчёте скила команд</li>
    <li>игроку моментально менялась команда при возрождении от плагина Revive Teammates,<br />
      если игрок переводился через меню принудительной смены команды</li>
    <li>в балансе по флагам не считались за випов игроки с флагами tc_full_immunity_flags</li>
    <li>проблема с сообщениями чата TC_BALANCED_BY_SKILL_ALL_*</li>
    <li>проблема с обнулением данных баланса по скилу</li>
    <li>проблема с обновлением данных в меню выбора команды</li>
    <li>проблема со сбросом ограничения на смену команду при входе</li>
    <li>в режиме tc_no_rounds 1 боты переводились будучи живыми. При этом объекты<br />
      (пушки, лазеры, раздатчики и т.д.) построенные ими числились в старой команде</li>
  </ul>
  <h4 id="section-4">Удалено:</h4>
  <ul>
    <li>удален квар tc_time_quota. Причина: Эффект от квара почти незаметный, так как<br />
      отменяется другими типами баланса и желанием игроков самим выбирать за какую<br />
      карту они хотят играть</li>
    <li>удален квар tc_data_storage_time. Причина: Более не нужен, так как квар<br />
      tc_time_quota был удален</li>
    <li>удален ключ словаря TC_SKILL_BALANCE_NOT_REQUIRED и соответствующее сообщение</li>
  </ul>
  <h4 id="section-5">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/team_control.amxx</li>
    <li>addons/amxmodx/configs/team_control.cfg</li>
    <li>addons/amxmodx/data/lang/team_control.txt</li>
  </ul>
  <h3 id="section-6">Версия 1.10.0 (18 апр 2024г):</h3>
  <h4 id="section-7">Добавлено:</h4>
  <ul>
    <li>поддержка скила из плагинов CsStats MySQL и StatsX RBS от SKAJIbnEJIb</li>
  </ul>
  <h4 id="section-8">Изменено:</h4>
  <ul>
    <li>улучшено описание многих кваров</li>
    <li>повышено удобство чтения team_control.cfg (длина строк)</li>
    <li>в 'lang/team_control.txt' добавлена памятка о возможности отключать сообщения</li>
    <li>удален квар tc_use_custom_amx_teammenu, так как с этой задачей справляется<br />
      квар tc_team_menu_cmd</li>
    <li>переработаны дебаг логи</li>
  </ul>
  <h4 id="section-9">Исправлено:</h4>
  <ul>
    <li>tc_skill_use_score работал некорректно если был установлен плагин Skill ELO<br />
      от SKAJIbnEJIb</li>
    <li>баланс по флагам работал некорректно при tc_no_rounds 1</li>
  </ul>
  <h4 id="section-10">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/team_control.amxx</li>
    <li>addons/amxmodx/configs/team_control.cfg</li>
    <li>addons/amxmodx/data/lang/team_control.txt</li>
  </ul>
  <h3 id="section-11">Версия 1.9.0 (13 янв 2024г):</h3>
  <h4 id="section-12">Добавлено:</h4>
  <ul>
    <li>добавлен квар tc_changeteam_effects, который задает флаги определяющие набор<br />
      эффектов при автобалансе игрока<br />
      a - звук из квара 'tc_changeteam_sound'<br />
      b - затемнение экрана игрока цветом новой команды<br />
      c - HUD сообщение</li>
    <li>добавлен квар tc_changeteam_effects_delay, отвечающий за задержку появления<br />
      эффектов при автобалансе игрока</li>
    <li>добавлен квар tc_chooseteam_cmd, отвечающий за список команд (разделенных ';')<br />
      с помощью которых будет вызываться меню 'Выбор команды'</li>
    <li>добавлен квар tc_team_menu_cmd, отвечающий за список команд (разделенных ';')<br />
      с помощью которых будет вызываться меню 'Перевести в команду'</li>
    <li>добавлен квар tc_balance_bots_num, который определяет будет (1) или нет (0)<br />
      включена балансировка количества ботов в командах</li>
    <li>добавлен квар tc_skill_use_score, который включает принудительное использование<br />
      счета игрока при балансировке по уровню умений. Даже если установлен плагин<br />
      отвечающий за скил, он будет игнорироваться</li>
    <li>добавлен квар tc_full_immunity_flags, отвечающий за флаги доступа необходимые<br />
      для получения полного иммунитета от автобаланса, включая баланс по флагам<br />
      доступа (tc_balance_by_flags)</li>
    <li>добавлен квар tc_data_storage_time, отвечающий время хранения данных игрока<br />
      (в днях) с момента последнего посещения (по умолчанию месяц)<br />
      Обнуляются данные игрока, отвечающие за время игры на карте<br />
      (см квар 'tc_time_quota')</li>
    <li>добавлено сообщение чата информирующее о том что баланс по скилу не требуется</li>
    <li>добавлено больше дебаг логов</li>
  </ul>
  <h4 id="section-13">Изменено:</h4>
  <ul>
    <li>улучшены описания кваров: tc_balance_by_flags, tc_access_flags,
      tc_high_access_flags</li>
    <li>бот теперь участвует в балансе всегда, несмотря на то что его уже переводило</li>
    <li>переделан баланс по количеству игроков</li>
    <li>сообщения чата информирующие о переводе игрока используют командный цвет<br />
      переводимого игрока (ранее был цвет игрока который получает сообщение)</li>
    <li>квар tc_hud_msg переименован в tc_changeteam_hud_msg</li>
    <li>удален квар tc_changeteam_screen_fade (см tc_changeteam_effects)</li>
  </ul>
  <h4 id="section-14">Исправлено:</h4>
  <ul>
    <li>квар версии плагина не был переименован. Теперь: team_control_version</li>
    <li>исправлен тип квара tc_time_quota</li>
    <li>при рестарте игры (sv_restart) не сбрасывалась задержка баланса по скилу</li>
    <li>фактически не работал баланс при tc_no_rounds 1</li>
    <li>меню 'Выбор команды' не обновляло значения кол-ва игроков при определенных<br />
      условиях</li>
  </ul>
  <h4 id="section-15">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/team_control.amxx</li>
    <li>addons/amxmodx/configs/team_control.cfg</li>
    <li>addons/amxmodx/data/lang/team_control.txt</li>
  </ul>
  <h3 id="section-16">Версия 1.6.8 (06 апр 2021г):</h3>
  <h4 id="section-17">Добавлено:</h4>
  <ul>
    <li>добавлен квар tc_time_quota, отвечающий за квоту времени игры за одну команду<br />
      (в минутах), превышая которую повышается шанс переноса в другую команду при<br />
      балансировке по количеству игроков</li>
    <li>добавлена поддержка плагина Skill ELO от SKAJIbnEJIb. Если плагин включен баланс<br />
      по скилу переключается на использование значений скила полученных из плагина<br />
      Skill ELO. Никаких дополнительных настроек не требуется.</li>
  </ul>
  <h4 id="section-18">Изменено:</h4>
  <ul>
    <li>во все типы баланса, добавлена рандомизация списка игроков</li>
    <li>изменен код под внешнее ядро плагинов (plugins_core.amxx)</li>
    <li>изменен код для лучшей совместимости All Inclusive</li>
    <li>изменено название и логика первого пункта меню при 'tc_select_team_menu_type 2'.<br />
      При входе на сервер первый пункт меню будет иметь название 'Войти в игру', а<br />
      после входа - 'Сменить команду'</li>
  </ul>
  <h4 id="section-19">Исправлено:</h4>
  <ul>
    <li>исправлен недочет меню из-за изменения кода в AMX Mod X версии 1.8.3+</li>
    <li>квар tc_skill_score_diff не поддерживал значение 0 и условие выполнялось всегда</li>
  </ul>
  <h4 id="section-20">Обновившиеся файлы:</h4>
  <ul>
    <li>addons/amxmodx/plugins/team_control.amxx</li>
    <li>addons/amxmodx/configs/team_control.cfg</li>
    <li>addons/amxmodx/data/lang/team_control.txt</li>
  </ul>
  <h3 id="section-21">Версия 1.6.2 (03 сен 2019г):</h3>
  <h4 id="section-22">Изменено:</h4>
  <ul>
    <li>изменения кода для совместимости со сборкой All Inclusive</li>
  </ul>
  <h3 id="section-23">Версия 1.6.0 (13 мая 2019г):</h3>
  <h4 id="section-24">Добавлено:</h4>
  <ul>
    <li>
      <p>добавлено более функциональное меню смены команды игрока для админов, на замену<br />
        стандартного amx_teammenu:</p>
      <ul>
        <li>у каждого игрока в меню отображается его команда</li>
        <li>игрок за которым идет наблюдение первый в списке</li>
        <li>игрок открывший меню второй в списке</li>
        <li>если игрок жив, смена команды откладывается до его смерти или начала раунда.<br />
          И переводится моментально, если он уже мертв</li>
      </ul>
    </li>
    <li>
      <p>все квары настраивающие флаги доступа теперь поддерживают спец значения:</p>
      <ul>
        <li>*steam - доступно игрокам, использующим Steam CS</li>
        <li>*bot - доступно ботам</li>
        <li>*hltv - доступно HLTV</li>
      </ul>
    </li>
    <li>
      <p>добавлен квар tc_use_custom_amx_teammenu, определяющий будет использоваться (1)<br />
        или нет (0) нестандартное меню принудительной смены команды игроков 'amx_teammenu'</p>
    </li>
    <li>
      <p>добавлен квар tc_access_flags, отвечающий за флаги доступа необходимые для<br />
        использования меню смены команды игрокам</p>
    </li>
    <li>
      <p>добавлен квар tc_high_access_flags, отвечающий за флаги доступа необходимые для<br />
        возможности менять команду игрокам с иммунитетом</p>
    </li>
    <li>
      <p>добавлены дебаг логи для оценки эффективности баланса команд (tc_debug_level "1")</p>
    </li>
  </ul>
  <h4 id="section-25">Изменено:</h4>
  <ul>
    <li>квары отвечающие за настройку HUD сообщений (оканчивающиеся на _pos и _color),<br />
      объединены в один квар где значение цвета и координат разделяется символом '|'</li>
  </ul>
  <h3 id="section-26">Версия 1.5.4 (22 ноя 2018г):</h3>
  <h4 id="section-27">Добавлено:</h4>
  <ul>
    <li>добавлены форвард функции 'tc_change_team_pre' и 'tc_change_team_post', которые<br />
      вызываются перед (pre) и после (post) смены команды игрока (см team_control.inc)<br />
      Если форвард функция 'tc_change_team_pre' возращает PLUGIN_HANDLED, то смена<br />
      команды блокируется<br />
      Если форварды не используются, то необходимые для их работы функции не<br />
      регистрируются и не вызываются</li>
    <li>добавлена native функция 'tc_change_team', с помощью которой можно менять<br />
      команду игрока функция также запускает форварды 'tc_change_team_pre' и<br />
      'tc_change_team_pre', для информирования других плагинов о смене команды<br />
      поддерживает 3 режима перевода игрока в другую команду:
      <ul>
        <li>TC_NATIVE - родной, вызывается gamedll (используется только в форварде<br />
          'tc_change_team_post')</li>
        <li>TC_MENU - вызывается при смене команды через меню плагина (используется в<br />
          форвардах 'tc_change_team_pre' и 'tc_change_team_post'')</li>
        <li>TC_IMMEDIATELY_TRANSFER - моментальный</li>
        <li>TC_DELAYED_UNTIL_RESPAWN - отложенный до следующего возрождения</li>
        <li>TC_DELAYED_UNTIL_KILLED - отложенный до момента смерти</li>
      </ul>
    </li>
  </ul>
  <h4 id="section-28">Изменено:</h4>
  <ul>
    <li>изменено название плагина с 'Auto Team Balance Adanced' на 'Team Control' из-за<br />
      того то плагин вышел за рамки функциональности относящейся к балансу игроков и<br />
      теперь отвечает за все что связано с командой игрока</li>
    <li>изменено имя файла словаря мультиязычности с 'auto_team_balance_advanced.txt'<br />
      на 'team_control.txt' из-за смены названия плагина</li>
    <li>изменено имя конфигурационного файла с 'auto_team_balance_advanced.cfg' на<br />
      'team_control.cfg' из-за смены названия плагина</li>
    <li>изменен префикс имен форвард функций из-за смены названия плагина: с 'atb_' на 'tc_'</li>
    <li>изменен префикс кваров из-за смены названия плагина: с 'tb_' на 'tc_'</li>
    <li>изменен префикс ключей мультиязычности в team_control.txt из-за смены названия<br />
      плагина</li>
  </ul>
  <h3 id="section-29">Версия 1.5.1 (31 мар 2018г):</h3>
  <h4 id="section-30">Добавлено:</h4>
  <ul>
    <li>реклама в консоли игрока при подключении</li>
    <li>добавлен квар tb_fix_score_info, определяющий будет исправляться (1) или нет (0)<br />
      счет игрока, который живым меняет команду (исправляет отнимание фрага и<br />
      прибавление смерти)</li>
    <li>добавлен форвард 'atb_team_selection_ended', который вызывается после выбора<br />
      внешнего вида игрока или выбора команды если tb_auto_random_appearance имеет<br />
      значение 1. Если форвард не используется, то необходимые для его работы функции<br />
      не регистрируются и не вызываются</li>
    <li>добавлен квар tb_auto_random_appearance, который определяет будет ли<br />
      назначаться (1) или нет (0) автоматически внешний вид игрока после выбора команды</li>
    <li>добавлен квар tb_balance_by_flags, который определяет будет ли производиться<br />
      балансировка по флагам доступа (1) или нет (0)</li>
  </ul>
  <h4 id="section-31">Изменено:</h4>
  <ul>
    <li>для режима с раундами баланс по количеству игроков выбирает игрока с наименьшим<br />
      временем игры, то есть того кто позже зашел на сервер</li>
  </ul>
  <h4 id="section-32">Исправлено:</h4>
  <ul>
    <li>исправлен недочет (версии 1.4.8): игрок не мог выйти в наблюдатели будучи живым</li>
    <li>исправлен недочет (версии 1.4.6): при включенном CSDM моде игрок не мог<br />
      возродиться если ранее вышел в наблюдатели</li>
    <li>исправлен недочет: при включенном CSDM моде игрок не мог возродиться при смене<br />
      команды</li>
    <li>исправлен недочет: меню становилось стандартным если вход в команду был запрещен<br />
      из-за ограничений mp_limitteams</li>
    <li>исправлен недочет: неправильный индекс игрока, которого должен перевести автобаланс</li>
  </ul>
  <h4 id="section-33">Удалено:</h4>
  <ul>
    <li>удален квар tb_forced_respawn_delay, так как практически не используется и<br />
      в тоже время может быть потенциальной причиной падения сервера</li>
  </ul>
  <h3 id="section-34">Версия 1.4.0 (20 сен 2017г):</h3>
  <h4 id="section-35">Добавлено:</h4>
  <ul>
    <li>добавлен форвард 'atb_check_player', который вызывается для каждого игрока в<br />
      процессе автобаланса. Если форвард возвращает значение PLUGIN_HANDLED, то игрок<br />
      игнорируется автобалансом</li>
    <li>добавлен квар tb_hud_msg_color, который задает RGB цвет HUD сообщения,<br />
      информирующего игрока о том что его переместил автобаланс</li>
    <li>добавлен квар tb_hud_msg_pos, который задает x и y координаты HUD сообщения,<br />
      информирующего игрока о том что его переместил автобаланс</li>
    <li>добавлен квар tb_changeteam_screen_fade, который определяет будет затемняться (1)<br />
      или нет (0) игроку экран цветом новой команды при автобалансе</li>
    <li>добавлен квар tb_changeteam_sound, отвечающий за путь к файлу звука (wav или mp3),<br />
      который будет проигрываться игроку если его перекинул автобаланс. Если квар<br />
      пустой, то звук не проигрывается</li>
  </ul>
  <h4 id="section-36">Изменено:</h4>
  <ul>
    <li>квар debug_level переименован в tb_debug_level, чтобы не пересекаться с<br />
      другими плагинами</li>
    <li>теперь при переходе в наблюдатели смена команды также блокируется, так как<br />
      раньше была возможность обходить временные ограничения на смену команды через<br />
      наблюдателей</li>
  </ul>
  <h4 id="section-37">Исправлено:</h4>
  <ul>
    <li>исправлен недочет: иногда неправильно рассчитывалось время иммунитета от<br />
      автобаланса</li>
    <li>устранена несовместимость с ReGameDLL</li>
    <li>устранен недочет: не был удален отладочный код, для тестирования на локальном<br />
      сервере</li>
    <li>исправлен недочет: иногда не затемнялся экран при автобалансе, так как слишком<br />
      рано отправлялось сообщение (багрепорт Bullseye)</li>
  </ul>
  <h3 id="section-38">Версия 1.3.0 (27 июл 2017г):</h3>
  <h4 id="section-39">Добавлено:</h4>
  <ul>
    <li>добавлено динамическое переключение типов меню (квар tb_select_team_menu_type),<br />
      в связи с появлением команды tb_reload_cvars</li>
    <li>добавлено динамическое переключение плагина в режим без раундов и обратно, в<br />
      связи с появлением команды tb_reload_cvars</li>
    <li>добавлена серверная консольная команда tb_reload_cvars, которая обновляет<br />
      значения кваров плагина</li>
    <li>появилась возможность отключения любых сообщений с помощью комментирования в<br />
      auto_team_balance_advanced.txt ('//' или ';')</li>
  </ul>
  <h4 id="section-40">Изменено:</h4>
  <ul>
    <li>удален код блокирующий запуск плагина на ReHLDS серверах, но не проверялась<br />
      работоспособность</li>
  </ul>
  <h4 id="section-41">Исправлено:</h4>
  <ul>
    <li>исправлен недочет: не срабатывал обработчик нажатия клавиш из-за изменений<br />
      связанных с динамическим переключением типов меню</li>
    <li>исправлен недочет при котором игроку не блокировалась смена команды если<br />
      tb_no_rounds 1</li>
    <li>исправлен недочет при котором игроку блокировался выбор в случае если он<br />
      замешкался (например при старте карты) и получал отказ в смене команды</li>
    <li>исправлен недочет при котором при переходе в Наблюдатели игроку запрещалась<br />
      смена команды</li>
  </ul>
  <h3 id="section-42">Версия 1.2.0 (6 ноя 2016г):</h3>
  <h4 id="section-43">Добавлено:</h4>
  <ul>
    <li>добавлено автоматическое создание multilang файла auto_team_balance_advanced.txt</li>
    <li>добавлено автоматическое создание конфигурационного файла<br />
      auto_team_balance_advanced.cfg, если он не существует</li>
    <li>добавлена возможность компиляции с поддержкой ReAPI</li>
  </ul>
  <h4 id="section-44">Изменено:</h4>
  <ul>
    <li>расширена функциональность кваров отвечающих за флаги доступа (см описание кваров)</li>
    <li>после выбора команды (включая первый выбор после подключения) игрок получает<br />
      иммунитет от баланса и запрет на смену команды в зависимости от настроек</li>
  </ul>
  <h4 id="section-45">Исправлено:</h4>
  <ul>
    <li>исправлено отображение несуществующей бомбы у Контр-Террориста перенесенного в<br />
      команду Террористов</li>
    <li>исправлен недочет при котором командный счет считался всегда как для режима<br />
      без раундов</li>
  </ul>
  <h3 id="section-46">Версия 1.1 (29 апреля 2016г):</h3>
  <h4 id="section-47">Добавлено:</h4>
  <ul>
    <li>добавлен квар tb_no_rounds, который включает режим работы рассчитанный на<br />
      сервера с постоянным возрождением (CSDM и ему подобные)</li>
    <li>добавлен квар tb_forced_respawn_delay, отвечающий за время через которое после<br />
      выбора команды игрок будет принудительно возрожден</li>
    <li>добавлен квар tb_balance_by_playersnum, который определяет будет ли производиться<br />
      балансировка команд по количеству игроков</li>
    <li>добавлен квар tb_balance_by_skill, который определяет будет ли производиться<br />
      балансировка команд по уровню умений</li>
    <li>добавлен квар tb_changeteam_block_times, который определяет на сколько раундов<br />
      или минут (для режима без раундов) переведенному плагином в другую команду<br />
      игроку будет заблокирована возможность ручной смены команды</li>
    <li>добавлена возможность компиляции плагина в режиме интеграции<br />
      (#define ADMIN_LOADER_INTEGRATION) с плагином Admin Loader версии 1.5 и выше<br />
      от neygomon с целью получения флагов доступа через предоставляемое API</li>
  </ul>
  <h4 id="section-48">Изменено:</h4>
  <ul>
    <li>переименован квар tb_by_skill_interval в tb_skill_skip_times, в связи с<br />
      добавлением режима работы без раундов (см полное описание)</li>
    <li>переименован квар tb_reset_immunity_interval в tb_immunity_skip_times, в связи<br />
      с добавлением режима работы без раундов (см полное описание)</li>
  </ul>
</body>

</html>